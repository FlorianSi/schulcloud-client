{{#extend "lib/loggedin"}}

    {{#content "styles" mode="append"}}
        <link rel="stylesheet" href="/styles/courses/course.css"/>
        <link rel="stylesheet" href="/styles/homework/homework.css"/>
        <link rel="stylesheet" href="/vendor/jquery/jquery-ui.css"/>
    {{/content}}

    {{#content "scripts" mode="append"}}
        <script src="/scripts/jquery/jquery-ui.min.js" type="text/javascript" defer></script>
        <script src="/scripts/jquery/jquery.ui.touch-punch.js" type="text/javascript" defer></script>
        <script src="/scripts/teamMembers.js" type="text/javascript" defer></script>
    {{/content}}

    {{#content "page"}}
        {{#if method}}
            <input type="hidden" name="_method" data-force-value="true" value="{{method}}"/>
        {{/if}}

        <div id="roles" data-roles="{{roles}}"></div>

        <section class="section-course">
            {{!-- {{#userHasPermission "ADD_SCHOOL_MEMBERS"}} --}}
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-6">
                            <p>Füge Lehrer und Schüler aus deiner Schule zum Team hinzu.</p>
                            <button class="btn btn-primary btn-add-member padding-bottom">
                                Interne Mitglieder hinzufügen
                            </button>
                        </div>

                        <div class="col-sm-6">
                            <p>Lade externe Experten und Admins anderer Schulen per E-Mail ein.</p>
                            <button class="btn btn-primary btn-invite-external-member">
                                Externe Mitglieder einladen
                            </button>
                        </div>
                    </div>
                </div>
            {{!-- {{/userHasPermission}} --}}

            {{!-- {{#ifCond (arrayLength bodyInvitations) '>' 0}}
                <h4 style="margin-top: 2rem" class="padding-top">Ausstehende Einladungen</h4>
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12 no-padding">
                            {{> "lib/components/table" head=../headInvitations body=../bodyInvitations}}
                        </div>
                    </div>
                </div>
            {{/ifCond}} --}}

            <h4 class="padding-top">{{arrayLength body}}
                {{#ifCond (arrayLength body) '==' 1}} Mitglied {{/ifCond}}
                {{#ifCond (arrayLength body) '>' 1}} Mitglieder {{/ifCond}}
            </h4>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12 no-padding">
                        {{> "lib/components/table" head=head body=body}}
                    </div>
                </div>
            </div>

            {{#embed "lib/components/modal-form" action=addMemberAction class="add-member-modal"}}
                {{#content "fields"}}
                    {{> "teams/forms/form-add-member" users=users}}
                {{/content}}
            {{/embed}}

            {{#embed "lib/components/modal-form" action=editMemberAction class="edit-member-modal"}}
                {{#content "fields"}}
                    {{> "teams/forms/form-edit-member" roles=roles}}
                {{/content}}
            {{/embed}}

            {{#embed "lib/components/modal-form" class="edit-invitation-modal"}}
                {{#content "fields"}}
                    {{> "teams/forms/form-edit-invitation"}}
                {{/content}}
            {{/embed}}

            {{#embed "lib/components/modal-form" action=inviteExternalMemberAction class="invite-external-member-modal"}}
                {{#content "fields"}}
                    {{> "teams/forms/form-invite-external-member" roles=rolesExternal}}
                {{/content}}
            {{/embed}}

            {{#embed "lib/components/modal-form" action=deleteMemberAction class="delete-member-modal"}}
                {{#content "fields"}}
                    {{> "teams/forms/form-delete-member"}}
                {{/content}}
            {{/embed}}
        </section>
    {{/content}}
{{/extend}}
