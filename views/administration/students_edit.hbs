{{#content "scripts" mode="append"}}
    <script src="/scripts/jquery/jquery.datetimepicker.full.min.js" type="text/javascript" defer></script>
{{/content}}
{{#content "styles" mode="append"}}
    <link rel="stylesheet" href="/styles/administration/dataprivacy.css"/>
    <link rel="stylesheet" href="/styles/lib/datetimepicker/jquery.datetimepicker.min.css"/>
{{/content}}
{{#extend "lib/loggedin"}}
    {{#content "page"}}
        <div class="row">
            <div class="col-xl-12">
                <form class="modal-form" id="student-form" method="post" action="{{action}}">
                    {{#if method}}
                        <input type="hidden" name="_method" data-force-value="true" value="{{method}}" />
                    {{/if}}

                    {{#if referrer}}﻿<input name="referrer" type="hidden" data-force-value="true" value="{{referrer}}" />{{/if}}

                    ﻿<input name="schoolId" type="hidden" data-force-value="true" value="{{currentSchool}}" />

                    <div class="form-group">
                        <label>Vorname</label>
                        <input class="form-control" name="firstname" type="text" required value="{{student.firstName}}"/>
                    </div>

                    <div class="form-group">
                        <label>Nachname</label>
                        <input class="form-control" name="lastname" type="text" required value="{{student.lastName}}"/>
                    </div>

                    <div class="form-group">
                        <label>Username</label>
                        <input class="form-control" disabled="true" placeholder="UserName" name="lastname" type="text" required value=""/>
                    </div>

                    <div class="form-group">
                        <label>Geburtsdatum</label>
                        <input class="form-control linked" data-date data-min-date="1990/01/01" data-max-date="2015/01/01" data-start-date="2000/01/01" name="student-birthdate" type="text" data-from="student-birthdate" required autocomplete="off" />
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Kurs</label>
                                {{#unless isSubstitution}}
                                    <select class="" name="courseId" id="coursePicker" data-placeholder="Kurs auswählen">
                                        <option value="" {{#unless assignment.courseId}}selected{{/unless}}>Keine Zuordnung</option>
                                        {{#each courses}}
                                            <option value="{{this._id}}" {{#ifvalue this._id value=@root.assignment.courseId._id}}selected{{/ifvalue}}>{{this.name}}</option>
                                        {{/each}}
                                    </select>
                                {{else}}
                                    <input name="courseId" type="hidden" data-force-value="true" value="{{assignment.courseId._id}}" />
                                    <div><i>{{assignment.courseId.name}}</i> <small class="text-secondary">(Vertretungslehrer dürfen den Kurs nicht ändern)</small></div>
                                {{/unless}}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Thema</label>
                                <select name="lessonId" id="lessonPicker" data-placeholder="Thema auswählen" {{#unless lessons}}disabled="true"{{/unless}}>
                                    {{#if assignment.courseId}}
                                        <option value="" {{#unless assignment.lessonId}}selected{{/unless}}>Keine Zuordnung</option>
                                        {{#each lessons}}
                                            <option value="{{this._id}}" {{#ifvalue this._id value=@root.assignment.lessonId}}selected{{/ifvalue}}>{{this.name}}</option>
                                        {{/each}}
                                    {{else}}
                                        <option value="" >Keine Themen in diesem Kurs</option>
                                    {{/if}}
                                </select>
                            </div>
                        </div>
                    </div>

                    {{#unless isStudent}}
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>
                                            <input id="teamSubmissions" name="teamSubmissions" type="checkbox" value="true" {{#if assignment.teamSubmissions}}checked="checked"{{/if}}/>
                                            Teamabgabe ermöglichen
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6 {{#unless assignment.teamSubmissions}}hidden-xl-down{{/unless}}" id="teamsize">
                                    <div class="form-group">
                                        <label>maximale Teamgröße:</label>
                                        <input class="form-control" name="maxTeamMembers" id="maxTeamMembers" type="number" min="2" placeholder="5" value="{{assignment.maxTeamMembers}}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {{/unless}}

                    <div class="form-group">
                        <label>Aufgabenstellung</label>
                        <textarea name="description" type="text" class="form-control customckeditor" placeholder="Aufgabenstellung">{{assignment.description}}</textarea>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Für Schüler sichtbar und zu bearbeiten ab:</label>
                                <input class="form-control" data-datetime name="availableDate" id="availableDate" type="text" value="{{assignment.availableDate}}"/>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Bearbeitungszeitraum endet am:</label>
                                <input class="form-control" data-datetime name="dueDate" id="dueDate" type="text" value="{{assignment.dueDate}}"/>
                            </div>
                        </div>
                    </div>

                    {{#unless isStudent}}
                        <div class="form-group">
                            <label>
                                <input name="private" type="checkbox" value="private" {{#if assignment.private}}checked="checked"{{/if}}/>
                                Private Aufgabe (nur für mich sichtbar)
                            </label></br>
                            <label>
                                <input name="publicSubmissions" type="checkbox" value="public" {{#if assignment.publicSubmissions}}checked="checked"{{/if}}/>
                                Schülerabgaben untereinander sichtbar
                            </label>
                        </div>
                    {{else}}
                        <div class="form-group">
                            <input name="private" type="hidden" data-force-value="true" value="private" />
                        </div>
                    {{/unless}}




                    <div class="modal-footer">
                        <button class="btn btn-add btn-secondary btn-cancel">
                            {{closeLabel}}
                        </button>

                        <button type="submit" class="btn btn-primary btn-submit">
                            {{submitLabel}}
                        </button>
                    </div>
                </form>

                {{#embed "lib/components/modal-cancel" class="cancel-modal"}}

                {{/embed}}

            </div>
        </div>
    {{/content}}
{{/extend}}